Health Questionnaire Backend
============================

This is the backend part of the Health Questionnaire application built with NestJS and MySQL.

Prerequisites
-------------

*   Node.js version: v18.19.0
*   NPM
*   NVM (Node Version Manager)
*   Docker

Setup Instructions
------------------

1.  **Clone the Repository**
    
        git clone https://github.com/oniseun/silver-journey.git
        cd silver-journey/backend
    
2.  **Use the Correct Node Version**
    
    Ensure you are using the correct version of Node.js:
    
        nvm use
    
3.  **Setup Environment Variables and Install Packages**
    
    Run the following command to set up environment variables and install the required packages:
    
        npm run setup
    
4.  **Start the MySQL Database**
    
    Run the following command to start the MySQL database on Docker:
    
        npm run start:db
    
5.  **Start the Development Server**
    
    The backend will run on `localhost:3006`:
    
        npm run start:dev
    

Running Tests
-------------

### Unit Tests

To run the unit tests, use the following command:

    npm run test

### End-to-End Tests

To run the end-to-end tests, use the following command:

    npm run test:e2e

Environment Variables
---------------------

The application requires several environment variables to be set. Use the `.env` file for setting these variables. A sample file is provided for reference.

    DATABASE_HOST=localhost
    DATABASE_PORT=3306
    DATABASE_USERNAME=root
    DATABASE_PASSWORD=password
    DATABASE_NAME=healthcare
    ENCRYPTION_KEY=test1
    PORT=3006

Make sure to replace the placeholder values with the actual values required for your setup.

Scripts
-------

*   `npm run start:db`: Starts the MySQL database on Docker.
*   `npm run start:dev`: Starts the development server.
*   `npm run test:e2e`: Runs the end-to-end tests.
*   `npm run test`: Runs the unit tests.
*   `npm run setup`: Copies environment variables from `.envsample` to `.env` and installs packages.


Additional Information
----------------------

*   The application uses NestJS framework for building efficient and scalable server-side applications.
*   Database used is MySQL.
*   The application includes comprehensive logging using Pino.

Project Structure
-----------------

    backend/
    |-- src/
    |   |-- common/
    |   |   |-- enums/
    |   |   |   |-- gender.enum.ts
    |   |   |   |-- health-condition.enum.ts
    |   |   |   |-- yes-no.enum.ts
    |   |-- questionnaire/
    |   |   |-- dto/
    |   |   |   |-- create-questionnaire.dto.ts
    |   |   |   |-- questionnaire-list.dto.ts
    |   |   |-- entities/
    |   |   |   |-- questionnaire.entity.ts
    |   |   |-- questionnaire.controller.ts
    |   |   |-- questionnaire.controller.spec.ts
    |   |   |-- questionnaire.module.ts
    |   |   |-- questionnaire.service.ts
    |   |   |-- questionnaire.service.spec.ts
    |   |-- app.module.ts
    |-- .envsample
    |-- .env (generated by setup script)
    |-- docker-compose.yml
    |-- package.json
    |-- README.md
    |-- tsconfig.json
    

Example `.env`
--------------

Here is an example of what your `.env` should look like:

    DATABASE_HOST=localhost
    DATABASE_PORT=3306
    DATABASE_USERNAME=root
    DATABASE_PASSWORD=password
    DATABASE_NAME=healthcare
    ENCRYPTION_KEY=test1
    PORT=3006

Usage
-----

Once the setup is complete, you can start the application by running:

    npm run start:dev

The application will be accessible at `http://127.0.0.1:3006`.


Swagger Documentation
---------------------

Swagger documentation for the API can be accessed at `http://localhost:3006/api`. 
